#!/usr/bin/fish

# For xdg stuff
set -x DE generic

# For QT apps to find GTK style
set -x GTK2_RC_FILES "$HOME/.gtkrc-2.0"

# Set up monitors
~/bin/autorandr --force --change --default default

# Start a dbus session
if [ -z "$DBUS_SESSION_BUS_ADDRESS" ]; and type dbus-launch >/dev/null
  eval (dbus-launch --exit-with-session | sed 's:=: :' | awk '{ print "set -x " $1 " \'" $2 "\';" }')
end

# For silly Java which can't deal with some window managers
set -x _JAVA_AWT_WM_NONREPARENTING 1
set -x _JAVA_OPTIONS '-Dawt.useSystemAAFontSettings=on -Dswing.aatext=true -Dswing.defaultlaf=com.sun.java.swing.plaf.gtk.GTKLookAndFeel'
wmname LG3D &

# Load in resources
xrdb -merge ~/.Xresources

# Keybindings
setxkbmap -option ctrl:nocaps &

# Screensaver
xscreensaver -nosplash &

# f.lux
xflux -z 19123 &

# Automount stuff
usermount &

# NetworkManager
nm-applet &

# PulseAudio
start-pulseaudio-x11

# Touchpad settings
synclient CoastingSpeed=0 PalmDetect=1 TapButton1=0 TapButton2=0 TapButton3=0 HorizTwoFingerScroll=1

# Set background
if [ -f ~/.fehbg ]
    eval (cat ~/.fehbg)
end

exec i3
